import{a as Ke,i as Qe,s as Ye,f as z,M as Ze,b as U,e as Ie,d as D,H as Y,k as h,h as C,t as b,j as N,l as E,o as xe,a5 as et,aB as tt,c as I,m as L,n as T,J as lt,p as ce,K as ie,aq as te,y as M,z as B,$ as P,A as R,C as A,as as Le,Q as nt,R as it,w as Te,x as De,I as Ee,a2 as rt,D as ot}from"../lite.js";import{B as st}from"./BlockLabel-DWW9BWN3.js";import{E as ft}from"./Empty-Dns-ytKL.js";import{S as at}from"./ShareButton-Be-vgu5O.js";import{D as ut}from"./Download-RUpc9r8A.js";import{I as Re,F as ct}from"./FullscreenButton-BNqXgb8R.js";import{P as Ae}from"./Play-BIkNyEKH.js";import{I as _t}from"./IconButtonWrapper-BQG8MTSb.js";/* empty css                                             */import{M as mt}from"./ModifyUpload-1XV0j9uc.js";import{I as re}from"./Image-DewrJLf7.js";/* empty css                                                   */import{V as oe}from"./Video-BRL0rMzw.js";import{u as ht}from"./utils-BsGrhMNe.js";import"./Community-BFnPJcwx.js";import"./Edit-fMGAgLsI.js";import"./Undo-50qkik3g.js";import"./DownloadLink-CqqU4pZ8.js";import"./file-url-xPYdE3p2.js";import"./hls-CnVhpNcu.js";var _e=Object.prototype.hasOwnProperty;function me(l,e,n){for(n of l.keys())if(Q(n,e))return n}function Q(l,e){var n,t,r;if(l===e)return!0;if(l&&e&&(n=l.constructor)===e.constructor){if(n===Date)return l.getTime()===e.getTime();if(n===RegExp)return l.toString()===e.toString();if(n===Array){if((t=l.length)===e.length)for(;t--&&Q(l[t],e[t]););return t===-1}if(n===Set){if(l.size!==e.size)return!1;for(t of l)if(r=t,r&&typeof r=="object"&&(r=me(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(l.size!==e.size)return!1;for(t of l)if(r=t[0],r&&typeof r=="object"&&(r=me(e,r),!r)||!Q(t[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)l=new Uint8Array(l),e=new Uint8Array(e);else if(n===DataView){if((t=l.byteLength)===e.byteLength)for(;t--&&l.getInt8(t)===e.getInt8(t););return t===-1}if(ArrayBuffer.isView(l)){if((t=l.byteLength)===e.byteLength)for(;t--&&l[t]===e[t];);return t===-1}if(!n||typeof l=="object"){t=0;for(n in l)if(_e.call(l,n)&&++t&&!_e.call(e,n)||!(n in e)||!Q(l[n],e[n]))return!1;return Object.keys(e).length===t}}return l!==l&&e!==e}async function gt(l){return l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([n,t])=>n===null||!n.url?"":await ht(n.url)))).map(n=>`<img src="${n}" style="height: 400px" />`).join("")}</div>`:""}const{window:Ue}=tt;function he(l,e,n){const t=l.slice();return t[47]=e[n],t[49]=n,t}function ge(l,e,n){const t=l.slice();return t[50]=e[n],t[51]=e,t[49]=n,t}function pe(l){let e,n;return e=new st({props:{show_label:l[2],Icon:Re,label:l[3]||"Gallery"}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&4&&(i.show_label=t[2]),r[0]&8&&(i.label=t[3]||"Gallery"),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function pt(l){let e,n,t,r,i,f,c=l[22]&&l[7]&&be(l),o=l[12]&&l[1]===null&&je(l),p=te(l[16]),a=[];for(let u=0;u<p.length;u+=1)a[u]=Be(he(l,p,u));const g=u=>b(a[u],1,1,()=>{a[u]=null});return{c(){e=M("div"),c&&c.c(),n=U(),t=M("div"),o&&o.c(),r=U(),i=M("div");for(let u=0;u<a.length;u+=1)a[u].c();B(i,"class","grid-container svelte-842rpi"),P(i,"--grid-cols",l[4]),P(i,"--grid-rows",l[5]),P(i,"--object-fit",l[8]),P(i,"height",l[6]),R(i,"pt-6",l[2]),B(t,"class","grid-wrap svelte-842rpi"),R(t,"minimal",l[13]==="minimal"),R(t,"fixed-height",l[13]!=="minimal"&&(!l[6]||l[6]=="auto")),R(t,"hidden",l[17]),B(e,"class","gallery-container")},m(u,_){D(u,e,_),c&&c.m(e,null),A(e,n),A(e,t),o&&o.m(t,null),A(t,r),A(t,i);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(i,null);l[42](e),f=!0},p(u,_){if(u[22]&&u[7]?c?(c.p(u,_),_[0]&4194432&&h(c,1)):(c=be(u),c.c(),h(c,1),c.m(e,n)):c&&(C(),b(c,1,1,()=>{c=null}),N()),u[12]&&u[1]===null?o?(o.p(u,_),_[0]&4098&&h(o,1)):(o=je(u),o.c(),h(o,1),o.m(t,r)):o&&(C(),b(o,1,1,()=>{o=null}),N()),_[0]&65538){p=te(u[16]);let d;for(d=0;d<p.length;d+=1){const $=he(u,p,d);a[d]?(a[d].p($,_),h(a[d],1)):(a[d]=Be($),a[d].c(),h(a[d],1),a[d].m(i,null))}for(C(),d=p.length;d<a.length;d+=1)g(d);N()}(!f||_[0]&16)&&P(i,"--grid-cols",u[4]),(!f||_[0]&32)&&P(i,"--grid-rows",u[5]),(!f||_[0]&256)&&P(i,"--object-fit",u[8]),(!f||_[0]&64)&&P(i,"height",u[6]),(!f||_[0]&4)&&R(i,"pt-6",u[2]),(!f||_[0]&8192)&&R(t,"minimal",u[13]==="minimal"),(!f||_[0]&8256)&&R(t,"fixed-height",u[13]!=="minimal"&&(!u[6]||u[6]=="auto")),(!f||_[0]&131072)&&R(t,"hidden",u[17])},i(u){if(!f){h(c),h(o);for(let _=0;_<p.length;_+=1)h(a[_]);f=!0}},o(u){b(c),b(o),a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)b(a[_]);f=!1},d(u){u&&E(e),c&&c.d(),o&&o.d(),Le(a,u),l[42](null)}}}function bt(l){let e,n;return e=new ft({props:{unpadded_box:!0,size:"large",$$slots:{default:[zt]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[1]&2097152&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function be(l){let e,n,t,r,i,f,c,o,p,a,g,u;n=new _t({props:{display_top_corner:l[15],$$slots:{default:[dt]},$$scope:{ctx:l}}});const _=[kt,wt],d=[];function $(k,v){return"image"in k[22]?0:1}i=$(l),f=d[i]=_[i](l);let w=l[22]?.caption&&ye(l),y=te(l[16]),m=[];for(let k=0;k<y.length;k+=1)m[k]=$e(ge(l,y,k));const Z=k=>b(m[k],1,1,()=>{m[k]=null});return{c(){e=M("button"),I(n.$$.fragment),t=U(),r=M("button"),f.c(),c=U(),w&&w.c(),o=U(),p=M("div");for(let k=0;k<m.length;k+=1)m[k].c();B(r,"class","media-button svelte-842rpi"),P(r,"height","calc(100% - "+(l[22].caption?"80px":"60px")+")"),B(r,"aria-label","detailed view of selected image"),B(p,"class","thumbnails scroll-hide svelte-842rpi"),B(p,"data-testid","container_el"),B(e,"class","preview svelte-842rpi"),R(e,"minimal",l[13]==="minimal")},m(k,v){D(k,e,v),L(n,e,null),A(e,t),A(e,r),d[i].m(r,null),A(e,c),w&&w.m(e,null),A(e,o),A(e,p);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(p,null);l[39](p),a=!0,g||(u=[Y(r,"click",function(){nt("image"in l[22]?l[36]:null)&&("image"in l[22]?l[36]:null).apply(this,arguments)}),Y(e,"keydown",l[24])],g=!0)},p(k,v){l=k;const S={};v[0]&32768&&(S.display_top_corner=l[15]),v[0]&4673026|v[1]&2097152&&(S.$$scope={dirty:v,ctx:l}),n.$set(S);let G=i;if(i=$(l),i===G?d[i].p(l,v):(C(),b(d[G],1,1,()=>{d[G]=null}),N(),f=d[i],f?f.p(l,v):(f=d[i]=_[i](l),f.c()),h(f,1),f.m(r,null)),(!a||v[0]&4194304)&&P(r,"height","calc(100% - "+(l[22].caption?"80px":"60px")+")"),l[22]?.caption?w?w.p(l,v):(w=ye(l),w.c(),w.m(e,o)):w&&(w.d(1),w=null),v[0]&598018){y=te(l[16]);let j;for(j=0;j<y.length;j+=1){const H=ge(l,y,j);m[j]?(m[j].p(H,v),h(m[j],1)):(m[j]=$e(H),m[j].c(),h(m[j],1),m[j].m(p,null))}for(C(),j=y.length;j<m.length;j+=1)Z(j);N()}(!a||v[0]&8192)&&R(e,"minimal",l[13]==="minimal")},i(k){if(!a){h(n.$$.fragment,k),h(f);for(let v=0;v<y.length;v+=1)h(m[v]);a=!0}},o(k){b(n.$$.fragment,k),b(f),m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)b(m[v]);a=!1},d(k){k&&E(e),T(n),d[i].d(),w&&w.d(),Le(m,k),l[39](null),g=!1,it(u)}}}function de(l){let e,n;return e=new Ee({props:{Icon:ut,label:l[11]("common.download")}}),e.$on("click",l[32]),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&2048&&(i.label=t[11]("common.download")),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function we(l){let e,n;return e=new ct({props:{container:l[18]}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&262144&&(i.container=t[18]),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ke(l){let e,n,t;return n=new at({props:{i18n:l[11],value:l[16],formatter:gt}}),n.$on("share",l[33]),n.$on("error",l[34]),{c(){e=M("div"),I(n.$$.fragment),B(e,"class","icon-button")},m(r,i){D(r,e,i),L(n,e,null),t=!0},p(r,i){const f={};i[0]&2048&&(f.i18n=r[11]),i[0]&65536&&(f.value=r[16]),n.$set(f)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){b(n.$$.fragment,r),t=!1},d(r){r&&E(e),T(n)}}}function ve(l){let e,n;return e=new Ee({props:{Icon:rt,label:"Close"}}),e.$on("click",l[35]),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p:ot,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function dt(l){let e,n,t,r,i,f=l[10]&&de(l),c=l[14]&&we(l),o=l[9]&&ke(l),p=!l[17]&&ve(l);return{c(){f&&f.c(),e=U(),c&&c.c(),n=U(),o&&o.c(),t=U(),p&&p.c(),r=Ie()},m(a,g){f&&f.m(a,g),D(a,e,g),c&&c.m(a,g),D(a,n,g),o&&o.m(a,g),D(a,t,g),p&&p.m(a,g),D(a,r,g),i=!0},p(a,g){a[10]?f?(f.p(a,g),g[0]&1024&&h(f,1)):(f=de(a),f.c(),h(f,1),f.m(e.parentNode,e)):f&&(C(),b(f,1,1,()=>{f=null}),N()),a[14]?c?(c.p(a,g),g[0]&16384&&h(c,1)):(c=we(a),c.c(),h(c,1),c.m(n.parentNode,n)):c&&(C(),b(c,1,1,()=>{c=null}),N()),a[9]?o?(o.p(a,g),g[0]&512&&h(o,1)):(o=ke(a),o.c(),h(o,1),o.m(t.parentNode,t)):o&&(C(),b(o,1,1,()=>{o=null}),N()),a[17]?p&&(C(),b(p,1,1,()=>{p=null}),N()):p?(p.p(a,g),g[0]&131072&&h(p,1)):(p=ve(a),p.c(),h(p,1),p.m(r.parentNode,r))},i(a){i||(h(f),h(c),h(o),h(p),i=!0)},o(a){b(f),b(c),b(o),b(p),i=!1},d(a){a&&(E(e),E(n),E(t),E(r)),f&&f.d(a),c&&c.d(a),o&&o.d(a),p&&p.d(a)}}}function wt(l){let e,n;return e=new oe({props:{src:l[22].video.url,"data-testid":"detailed-video",alt:l[22].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&4194304&&(i.src=t[22].video.url),r[0]&4194304&&(i.alt=t[22].caption||""),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function kt(l){let e,n;return e=new re({props:{"data-testid":"detailed-image",src:l[22].image.url,alt:l[22].caption||"",title:l[22].caption||null,class:l[22].caption&&"with-caption",loading:"lazy"}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&4194304&&(i.src=t[22].image.url),r[0]&4194304&&(i.alt=t[22].caption||""),r[0]&4194304&&(i.title=t[22].caption||null),r[0]&4194304&&(i.class=t[22].caption&&"with-caption"),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ye(l){let e,n=l[22].caption+"",t;return{c(){e=M("caption"),t=Te(n),B(e,"class","caption svelte-842rpi")},m(r,i){D(r,e,i),A(e,t)},p(r,i){i[0]&4194304&&n!==(n=r[22].caption+"")&&De(t,n)},d(r){r&&E(e)}}}function vt(l){let e,n,t,r;return e=new Ae({}),t=new oe({props:{src:l[50].video.url,title:l[50].caption||null,is_stream:!1,"data-testid":"thumbnail "+(l[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){I(e.$$.fragment),n=U(),I(t.$$.fragment)},m(i,f){L(e,i,f),D(i,n,f),L(t,i,f),r=!0},p(i,f){const c={};f[0]&65536&&(c.src=i[50].video.url),f[0]&65536&&(c.title=i[50].caption||null),t.$set(c)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),r=!1},d(i){i&&E(n),T(e,i),T(t,i)}}}function yt(l){let e,n;return e=new re({props:{src:l[50].image.url,title:l[50].caption||null,"data-testid":"thumbnail "+(l[49]+1),alt:"",loading:"lazy"}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&65536&&(i.src=t[50].image.url),r[0]&65536&&(i.title=t[50].caption||null),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function $e(l){let e,n,t,r,i,f=l[49],c,o,p;const a=[yt,vt],g=[];function u(w,y){return"image"in w[50]?0:1}n=u(l),t=g[n]=a[n](l);const _=()=>l[37](e,f),d=()=>l[37](null,f);function $(){return l[38](l[49])}return{c(){e=M("button"),t.c(),r=U(),B(e,"class","thumbnail-item thumbnail-small svelte-842rpi"),B(e,"aria-label",i="Thumbnail "+(l[49]+1)+" of "+l[16].length),R(e,"selected",l[1]===l[49]&&l[13]!=="minimal")},m(w,y){D(w,e,y),g[n].m(e,null),A(e,r),_(),c=!0,o||(p=Y(e,"click",$),o=!0)},p(w,y){l=w;let m=n;n=u(l),n===m?g[n].p(l,y):(C(),b(g[m],1,1,()=>{g[m]=null}),N(),t=g[n],t?t.p(l,y):(t=g[n]=a[n](l),t.c()),h(t,1),t.m(e,r)),(!c||y[0]&65536&&i!==(i="Thumbnail "+(l[49]+1)+" of "+l[16].length))&&B(e,"aria-label",i),f!==l[49]&&(d(),f=l[49],_()),(!c||y[0]&8194)&&R(e,"selected",l[1]===l[49]&&l[13]!=="minimal")},i(w){c||(h(t),c=!0)},o(w){b(t),c=!1},d(w){w&&E(e),g[n].d(),d(),o=!1,p()}}}function je(l){let e,n;return e=new mt({props:{i18n:l[11]}}),e.$on("clear",l[40]),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&2048&&(i.i18n=t[11]),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function $t(l){let e,n,t,r;return e=new Ae({}),t=new oe({props:{src:l[47].video.url,title:l[47].caption||null,is_stream:!1,"data-testid":"thumbnail "+(l[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){I(e.$$.fragment),n=U(),I(t.$$.fragment)},m(i,f){L(e,i,f),D(i,n,f),L(t,i,f),r=!0},p(i,f){const c={};f[0]&65536&&(c.src=i[47].video.url),f[0]&65536&&(c.title=i[47].caption||null),t.$set(c)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(t.$$.fragment,i),r=!1},d(i){i&&E(n),T(e,i),T(t,i)}}}function jt(l){let e,n;return e=new re({props:{alt:l[47].caption||"",src:typeof l[47].image=="string"?l[47].image:l[47].image.url,loading:"lazy"}}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},p(t,r){const i={};r[0]&65536&&(i.alt=t[47].caption||""),r[0]&65536&&(i.src=typeof t[47].image=="string"?t[47].image:t[47].image.url),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ze(l){let e,n=l[47].caption+"",t;return{c(){e=M("div"),t=Te(n),B(e,"class","caption-label svelte-842rpi")},m(r,i){D(r,e,i),A(e,t)},p(r,i){i[0]&65536&&n!==(n=r[47].caption+"")&&De(t,n)},d(r){r&&E(e)}}}function Be(l){let e,n,t,r,i,f,c,o,p;const a=[jt,$t],g=[];function u($,w){return"image"in $[47]?0:1}n=u(l),t=g[n]=a[n](l);let _=l[47].caption&&ze(l);function d(){return l[41](l[49])}return{c(){e=M("button"),t.c(),r=U(),_&&_.c(),i=U(),B(e,"class","thumbnail-item thumbnail-lg svelte-842rpi"),B(e,"aria-label",f="Thumbnail "+(l[49]+1)+" of "+l[16].length),R(e,"selected",l[1]===l[49])},m($,w){D($,e,w),g[n].m(e,null),A(e,r),_&&_.m(e,null),A(e,i),c=!0,o||(p=Y(e,"click",d),o=!0)},p($,w){l=$;let y=n;n=u(l),n===y?g[n].p(l,w):(C(),b(g[y],1,1,()=>{g[y]=null}),N(),t=g[n],t?t.p(l,w):(t=g[n]=a[n](l),t.c()),h(t,1),t.m(e,r)),l[47].caption?_?_.p(l,w):(_=ze(l),_.c(),_.m(e,i)):_&&(_.d(1),_=null),(!c||w[0]&65536&&f!==(f="Thumbnail "+(l[49]+1)+" of "+l[16].length))&&B(e,"aria-label",f),(!c||w[0]&2)&&R(e,"selected",l[1]===l[49])},i($){c||(h(t),c=!0)},o($){b(t),c=!1},d($){$&&E(e),g[n].d(),_&&_.d(),o=!1,p()}}}function zt(l){let e,n;return e=new Re({}),{c(){I(e.$$.fragment)},m(t,r){L(e,t,r),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Bt(l){let e,n,t,r,i,f,c;Ze(l[31]);let o=l[2]&&pe(l);const p=[bt,pt],a=[];function g(u,_){return u[0]==null||u[16]==null||u[16].length===0?0:1}return n=g(l),t=a[n]=p[n](l),{c(){o&&o.c(),e=U(),t.c(),r=Ie()},m(u,_){o&&o.m(u,_),D(u,e,_),a[n].m(u,_),D(u,r,_),i=!0,f||(c=Y(Ue,"resize",l[31]),f=!0)},p(u,_){u[2]?o?(o.p(u,_),_[0]&4&&h(o,1)):(o=pe(u),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(C(),b(o,1,1,()=>{o=null}),N());let d=n;n=g(u),n===d?a[n].p(u,_):(C(),b(a[d],1,1,()=>{a[d]=null}),N(),t=a[n],t?t.p(u,_):(t=a[n]=p[n](u),t.c()),h(t,1),t.m(r.parentNode,r))},i(u){i||(h(o),h(t),i=!0)},o(u){b(o),b(t),i=!1},d(u){u&&(E(e),E(r)),o&&o.d(u),a[n].d(u),f=!1,c()}}}function It(l,e,n){let t,r,i,{show_label:f=!0}=e,{label:c}=e,{value:o=null}=e,{columns:p=[2]}=e,{rows:a=void 0}=e,{height:g="auto"}=e,{preview:u}=e,{allow_preview:_=!0}=e,{object_fit:d="cover"}=e,{show_share_button:$=!1}=e,{show_download_button:w=!1}=e,{i18n:y}=e,{selected_index:m=null}=e,{interactive:Z}=e,{_fetch:k}=e,{mode:v="normal"}=e,{show_fullscreen_button:S=!0}=e,{display_icon_button_wrapper_top_corner:G=!1}=e,j=!1,H;const se=xe();let J=!0,V=null,le=o;m==null&&u&&o?.length&&(m=0);let ne=m;function fe(s){const O=s.target,F=s.offsetX,X=O.offsetWidth/2;F<X?n(1,m=t):n(1,m=r)}function Ce(s){switch(s.code){case"Escape":s.preventDefault(),n(1,m=null);break;case"ArrowLeft":s.preventDefault(),n(1,m=t);break;case"ArrowRight":s.preventDefault(),n(1,m=r);break}}let W=[],q;async function Ne(s){if(typeof s!="number"||(await lt(),W[s]===void 0))return;W[s]?.focus();const{left:O,width:F}=q.getBoundingClientRect(),{left:x,width:X}=W[s].getBoundingClientRect(),K=x-O+X/2-F/2+q.scrollLeft;q&&typeof q.scrollTo=="function"&&q.scrollTo({left:K<0?0:K,behavior:"smooth"})}let ae=0;async function ue(s,O){let F;try{F=await k(s)}catch(K){if(K instanceof TypeError){window.open(s,"_blank","noreferrer");return}throw K}const x=await F.blob(),X=URL.createObjectURL(x),ee=document.createElement("a");ee.href=X,ee.download=O,ee.click(),URL.revokeObjectURL(X)}et(()=>{document.addEventListener("fullscreenchange",()=>{n(17,j=!!document.fullscreenElement)})});function Se(){n(21,ae=Ue.innerHeight)}const Me=()=>{const s="image"in i?i?.image:i?.video;if(s==null)return;const{url:O,orig_name:F}=s;O&&ue(O,F??"image")};function Oe(s){ce.call(this,l,s)}function Pe(s){ce.call(this,l,s)}const Ve=()=>n(1,m=null),qe=s=>fe(s);function Fe(s,O){ie[s?"unshift":"push"](()=>{W[O]=s,n(19,W)})}const Ge=s=>n(1,m=s);function He(s){ie[s?"unshift":"push"](()=>{q=s,n(20,q)})}const We=()=>n(0,o=[]),Xe=s=>n(1,m=s);function Je(s){ie[s?"unshift":"push"](()=>{H=s,n(18,H)})}return l.$$set=s=>{"show_label"in s&&n(2,f=s.show_label),"label"in s&&n(3,c=s.label),"value"in s&&n(0,o=s.value),"columns"in s&&n(4,p=s.columns),"rows"in s&&n(5,a=s.rows),"height"in s&&n(6,g=s.height),"preview"in s&&n(26,u=s.preview),"allow_preview"in s&&n(7,_=s.allow_preview),"object_fit"in s&&n(8,d=s.object_fit),"show_share_button"in s&&n(9,$=s.show_share_button),"show_download_button"in s&&n(10,w=s.show_download_button),"i18n"in s&&n(11,y=s.i18n),"selected_index"in s&&n(1,m=s.selected_index),"interactive"in s&&n(12,Z=s.interactive),"_fetch"in s&&n(27,k=s._fetch),"mode"in s&&n(13,v=s.mode),"show_fullscreen_button"in s&&n(14,S=s.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in s&&n(15,G=s.display_icon_button_wrapper_top_corner)},l.$$.update=()=>{l.$$.dirty[0]&268435457&&n(28,J=o==null||o.length===0?!0:J),l.$$.dirty[0]&1&&n(16,V=o==null?null:o.map(s=>"video"in s?{video:s.video,caption:s.caption}:"image"in s?{image:s.image,caption:s.caption}:{})),l.$$.dirty[0]&872415235&&(Q(le,o)||(J?(n(1,m=u&&o?.length?0:null),n(28,J=!1)):n(1,m=m!=null&&o!=null&&m<o.length?m:null),se("change"),n(29,le=o))),l.$$.dirty[0]&65538&&(t=((m??0)+(V?.length??0)-1)%(V?.length??0)),l.$$.dirty[0]&65538&&(r=((m??0)+1)%(V?.length??0)),l.$$.dirty[0]&1073807362&&m!==ne&&(n(30,ne=m),m!==null&&se("select",{index:m,value:V?.[m]})),l.$$.dirty[0]&130&&_&&Ne(m),l.$$.dirty[0]&65538&&n(22,i=m!=null&&V!=null?V[m]:null)},[o,m,f,c,p,a,g,_,d,$,w,y,Z,v,S,G,V,j,H,W,q,ae,i,fe,Ce,ue,u,k,J,le,ne,Se,Me,Oe,Pe,Ve,qe,Fe,Ge,He,We,Xe,Je]}class Jt extends Ke{constructor(e){super(),Qe(this,e,It,Bt,Ye,{show_label:2,label:3,value:0,columns:4,rows:5,height:6,preview:26,allow_preview:7,object_fit:8,show_share_button:9,show_download_button:10,i18n:11,selected_index:1,interactive:12,_fetch:27,mode:13,show_fullscreen_button:14,display_icon_button_wrapper_top_corner:15},null,[-1,-1])}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),z()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),z()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),z()}get columns(){return this.$$.ctx[4]}set columns(e){this.$$set({columns:e}),z()}get rows(){return this.$$.ctx[5]}set rows(e){this.$$set({rows:e}),z()}get height(){return this.$$.ctx[6]}set height(e){this.$$set({height:e}),z()}get preview(){return this.$$.ctx[26]}set preview(e){this.$$set({preview:e}),z()}get allow_preview(){return this.$$.ctx[7]}set allow_preview(e){this.$$set({allow_preview:e}),z()}get object_fit(){return this.$$.ctx[8]}set object_fit(e){this.$$set({object_fit:e}),z()}get show_share_button(){return this.$$.ctx[9]}set show_share_button(e){this.$$set({show_share_button:e}),z()}get show_download_button(){return this.$$.ctx[10]}set show_download_button(e){this.$$set({show_download_button:e}),z()}get i18n(){return this.$$.ctx[11]}set i18n(e){this.$$set({i18n:e}),z()}get selected_index(){return this.$$.ctx[1]}set selected_index(e){this.$$set({selected_index:e}),z()}get interactive(){return this.$$.ctx[12]}set interactive(e){this.$$set({interactive:e}),z()}get _fetch(){return this.$$.ctx[27]}set _fetch(e){this.$$set({_fetch:e}),z()}get mode(){return this.$$.ctx[13]}set mode(e){this.$$set({mode:e}),z()}get show_fullscreen_button(){return this.$$.ctx[14]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),z()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[15]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),z()}}export{Jt as default};
//# sourceMappingURL=Gallery-C_WoGfvZ.js.map
